# AIPIC 项目完整安装步骤

## ✅ 已完成的步骤

1. ✅ Python 3.14.2 已安装并配置
2. ✅ PowerShell 执行策略已解决
3. ✅ npm 可以正常运行

## ⚠️ 当前需要解决的问题

### Visual Studio Build Tools

编译 `better-sqlite3` 需要 Visual Studio Build Tools。

## 📋 安装 Visual Studio Build Tools

### 步骤 1: 下载

1. 访问：https://visualstudio.microsoft.com/downloads/
2. 找到 "Build Tools for Visual Studio 2022"
3. 点击下载

### 步骤 2: 安装

1. 运行下载的安装程序
2. 在 "工作负载" 选项卡中：
   - ✅ 勾选 "使用 C++ 的桌面开发" (Desktop development with C++)
   - 确保包含：
     - MSVC v143 - VS 2022 C++ x64/x86 生成工具
     - Windows 10/11 SDK
3. 点击 "安装"
4. 等待安装完成（可能需要一些时间）

### 步骤 3: 验证安装

安装完成后，重启 PowerShell 或命令提示符，然后：

```powershell
cd C:\NeilData\AIPIC\aipic-web\server
npm install
```

## 🚀 安装完成后启动项目

### 1. 安装所有依赖

```powershell
cd C:\NeilData\AIPIC\aipic-web\server
npm install
```

### 2. 启动后端服务器

```powershell
npm run dev
```

后端将在 `http://localhost:3001` 启动

### 3. 启动前端服务器（新终端）

```powershell
cd C:\NeilData\AIPIC\aipic-web
npm run dev
```

前端将在 `http://localhost:5173` 启动

## 🔍 验证安装

### 检查后端
```powershell
Invoke-WebRequest -Uri http://localhost:3001/health
```

### 检查前端
打开浏览器：http://localhost:5173

## 📝 注意事项

1. **执行策略**：如果遇到 PowerShell 执行策略问题，运行：
   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process
   ```

2. **网络问题**：如果安装时遇到网络超时，可以：
   - 检查网络连接
   - 使用 VPN（如果需要）
   - 稍后重试

3. **编译时间**：首次编译 `better-sqlite3` 可能需要几分钟

## 🆘 常见问题

### Q: 安装 Build Tools 后仍然失败
A: 
- 确保选择了 "C++ build tools" 工作负载
- 重启 PowerShell/命令提示符
- 检查环境变量是否正确设置

### Q: 网络连接超时
A:
- 检查防火墙设置
- 尝试使用 VPN
- 稍后重试

### Q: 端口被占用
A:
```powershell
# 查找占用端口的进程
Get-NetTCPConnection -LocalPort 3001

# 停止进程
Stop-Process -Id <进程ID>
```

## 📚 相关文档

- `解决编译问题.md` - 编译问题详细说明
- `解决PowerShell执行策略.md` - PowerShell 执行策略问题
- `快速安装指南.md` - Python 安装指南

